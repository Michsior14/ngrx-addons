"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[937],{4409(e,t,n){n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"persist-state/getting-started","title":"Getting Started","description":"Persist your NgRx store state to localStorage, sessionStorage, or any custom storage that implements the StateStorage interface. Supports both root and feature states with automatic rehydration on page reload.","source":"@site/docs/persist-state/getting-started.md","sourceDirName":"persist-state","slug":"/persist-state/getting-started","permalink":"/ngrx-addons/docs/persist-state/getting-started","draft":false,"unlisted":false,"editUrl":"https://github.com/Michsior14/ngrx-addons/tree/main/docs/docs/persist-state/getting-started.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"docsSidebar","previous":{"title":"Introduction","permalink":"/ngrx-addons/docs/"},"next":{"title":"Configuration","permalink":"/ngrx-addons/docs/persist-state/configuration"}}');var o=n(4848),s=n(8453);const a={sidebar_position:1},i="Getting Started",d={},c=[{value:"Installation",id:"installation",level:2},{value:"Root State Persistence",id:"root-state-persistence",level:2},{value:"Standalone API (recommended)",id:"standalone-api-recommended",level:3},{value:"NgModule API",id:"ngmodule-api",level:3},{value:"Feature State Persistence",id:"feature-state-persistence",level:2},{value:"Standalone API (recommended)",id:"standalone-api-recommended-1",level:3},{value:"NgModule API",id:"ngmodule-api-1",level:3},{value:"Rehydration Action",id:"rehydration-action",level:2}];function l(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.header,{children:(0,o.jsx)(t.h1,{id:"getting-started",children:"Getting Started"})}),"\n",(0,o.jsxs)(t.p,{children:["Persist your NgRx store state to ",(0,o.jsx)(t.code,{children:"localStorage"}),", ",(0,o.jsx)(t.code,{children:"sessionStorage"}),", or any custom storage that implements the ",(0,o.jsx)(t.code,{children:"StateStorage"})," interface. Supports both root and feature states with automatic rehydration on page reload."]}),"\n",(0,o.jsxs)(t.p,{children:["Highly inspired by ",(0,o.jsx)(t.a,{href:"https://github.com/ngneat/elf/tree/master/packages/persist-state",children:"@ngneat/elf-persist-state"}),"."]}),"\n",(0,o.jsx)(t.h2,{id:"installation",children:"Installation"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:"npm i @ngrx-addons/persist-state\n"})}),"\n",(0,o.jsx)(t.h2,{id:"root-state-persistence",children:"Root State Persistence"}),"\n",(0,o.jsx)(t.h3,{id:"standalone-api-recommended",children:"Standalone API (recommended)"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-ts",children:"import { provideStore } from '@ngrx/store';\nimport { providePersistStore, localStorageStrategy } from '@ngrx-addons/persist-state';\n\nconst counterReducer = ...;\nconst reducers = { counter: counterReducer } as const;\n\nbootstrapApplication(AppComponent, {\n  providers: [\n    provideStore(reducers),\n    providePersistStore<typeof reducers>({\n      states: [\n        {\n          key: 'counter',\n          storage: localStorageStrategy,\n        },\n      ],\n    }),\n  ],\n});\n"})}),"\n",(0,o.jsx)(t.h3,{id:"ngmodule-api",children:"NgModule API"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-ts",children:"import { NgModule } from '@angular/core';\nimport { StoreModule } from '@ngrx/store';\nimport { PersistStateModule, localStorageStrategy } from '@ngrx-addons/persist-state';\n\nconst counterReducer = ...;\nconst reducers = { counter: counterReducer } as const;\n\n@NgModule({\n  imports: [\n    StoreModule.forRoot(reducers),\n    PersistStateModule.forRoot<typeof reducers>({\n      states: [\n        {\n          key: 'counter',\n          storage: localStorageStrategy,\n        },\n      ],\n    }),\n  ],\n})\nexport class AppModule {}\n"})}),"\n",(0,o.jsx)(t.h2,{id:"feature-state-persistence",children:"Feature State Persistence"}),"\n",(0,o.jsx)(t.h3,{id:"standalone-api-recommended-1",children:"Standalone API (recommended)"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-ts",children:"import { provideStore, provideState } from '@ngrx/store';\nimport {\n  providePersistStore,\n  providePersistState,\n  localStorageStrategy,\n} from '@ngrx-addons/persist-state';\n\ninterface CounterState {\n  count: number;\n}\n\nconst counterReducer = ...;\n\n// Root module\nbootstrapApplication(AppComponent, {\n  providers: [\n    provideStore(),\n    providePersistStore(),\n  ],\n});\n\n// Feature route/module\nconst counterRoutes: Route[] = [\n  {\n    path: 'counter',\n    providers: [\n      provideState('counter', counterReducer),\n      providePersistState<CounterState>({\n        key: 'counter',\n        states: [{ storage: localStorageStrategy }],\n      }),\n    ],\n    children: [...],\n  },\n];\n"})}),"\n",(0,o.jsx)(t.h3,{id:"ngmodule-api-1",children:"NgModule API"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-ts",children:"import { NgModule } from '@angular/core';\nimport { StoreModule } from '@ngrx/store';\nimport { PersistStateModule, localStorageStrategy } from '@ngrx-addons/persist-state';\n\ninterface CounterState {\n  count: number;\n}\n\nconst counterReducer = ...;\n\n@NgModule({\n  imports: [\n    StoreModule.forRoot(),\n    PersistStateModule.forRoot(),\n  ],\n})\nexport class AppModule {}\n\n@NgModule({\n  imports: [\n    StoreModule.forFeature('counter', counterReducer),\n    PersistStateModule.forFeature<CounterState>({\n      key: 'counter',\n      states: [{ storage: localStorageStrategy }],\n    }),\n  ],\n})\nexport class CounterModule {}\n"})}),"\n",(0,o.jsx)(t.admonition,{type:"note",children:(0,o.jsxs)(t.p,{children:["Always call ",(0,o.jsx)(t.code,{children:"forRoot()"})," / ",(0,o.jsx)(t.code,{children:"providePersistStore()"})," in your root module, even if you only use feature states."]})}),"\n",(0,o.jsx)(t.h2,{id:"rehydration-action",children:"Rehydration Action"}),"\n",(0,o.jsxs)(t.p,{children:["Once state is rehydrated from storage, the ",(0,o.jsx)(t.code,{children:"rehydrate"})," action (type: ",(0,o.jsx)(t.code,{children:"@ngrx-addons/persist-state/rehydrate"}),") is dispatched with the restored ",(0,o.jsx)(t.code,{children:"features"}),". You can use it in effects or meta-reducers:"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-ts",children:"import { rehydrate } from '@ngrx-addons/persist-state';\n\n// In an effect\nthis.actions$.pipe(\n  ofType(rehydrate),\n  tap(({ features }) => console.log('Rehydrated:', features)),\n);\n"})})]})}function u(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},8453(e,t,n){n.d(t,{R:()=>a,x:()=>i});var r=n(6540);const o={},s=r.createContext(o);function a(e){const t=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),r.createElement(s.Provider,{value:t},e.children)}}}]);