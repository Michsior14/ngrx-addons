"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[956],{4904(e,n,i){i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>d,default:()=>p,frontMatter:()=>r,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"common/utilities","title":"Common Utilities","description":"The @ngrx-addons/common package provides shared utilities used by both persist-state and sync-state. You can also use them independently.","source":"@site/docs/common/utilities.md","sourceDirName":"common","slug":"/common/utilities","permalink":"/ngrx-addons/docs/common/utilities","draft":false,"unlisted":false,"editUrl":"https://github.com/Michsior14/ngrx-addons/tree/main/docs/docs/common/utilities.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"docsSidebar","previous":{"title":"Configuration","permalink":"/ngrx-addons/docs/sync-state/configuration"}}');var s=i(4848),o=i(8453);const r={sidebar_position:4},d="Common Utilities",a={},c=[{value:"Key Filtering Operators",id:"key-filtering-operators",level:2},{value:"<code>excludeKeys</code>",id:"excludekeys",level:3},{value:"<code>includeKeys</code>",id:"includekeys",level:3},{value:"<code>isEqual</code>",id:"isequal",level:2},{value:"Initialization Strategies",id:"initialization-strategies",level:2},{value:"<code>BeforeAppInit</code>",id:"beforeappinit",level:3},{value:"<code>AfterAppInit</code>",id:"afterappinit",level:3}];function l(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"common-utilities",children:"Common Utilities"})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"@ngrx-addons/common"})," package provides shared utilities used by both ",(0,s.jsx)(n.code,{children:"persist-state"})," and ",(0,s.jsx)(n.code,{children:"sync-state"}),". You can also use them independently."]}),"\n",(0,s.jsx)(n.h2,{id:"key-filtering-operators",children:"Key Filtering Operators"}),"\n",(0,s.jsx)(n.h3,{id:"excludekeys",children:(0,s.jsx)(n.code,{children:"excludeKeys"})}),"\n",(0,s.jsx)(n.p,{children:"An RxJS operator that removes specified keys from the emitted state object:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { excludeKeys } from '@ngrx-addons/common';\n\nstate$.pipe(excludeKeys(['temporaryFlag', 'loading']));\n// { count: 1, temporaryFlag: true, loading: false }\n// \u2192 { count: 1 }\n"})}),"\n",(0,s.jsx)(n.h3,{id:"includekeys",children:(0,s.jsx)(n.code,{children:"includeKeys"})}),"\n",(0,s.jsx)(n.p,{children:"An RxJS operator that keeps only the specified keys:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { includeKeys } from '@ngrx-addons/common';\n\nstate$.pipe(includeKeys(['count', 'name']));\n// { count: 1, name: 'test', loading: false }\n// \u2192 { count: 1, name: 'test' }\n"})}),"\n",(0,s.jsx)(n.h2,{id:"isequal",children:(0,s.jsx)(n.code,{children:"isEqual"})}),"\n",(0,s.jsxs)(n.p,{children:["A deep equality comparison function used internally by ",(0,s.jsx)(n.code,{children:"distinctUntilChanged"})," to prevent unnecessary storage writes / broadcasts:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { isEqual } from '@ngrx-addons/common';\n\nisEqual({ a: 1, b: { c: 2 } }, { a: 1, b: { c: 2 } }); // true\nisEqual({ a: 1 }, { b: 1 }); // false\nisEqual([1, 2, 3], [1, 2, 3]); // true\n"})}),"\n",(0,s.jsx)(n.h2,{id:"initialization-strategies",children:"Initialization Strategies"}),"\n",(0,s.jsx)(n.h3,{id:"beforeappinit",children:(0,s.jsx)(n.code,{children:"BeforeAppInit"})}),"\n",(0,s.jsxs)(n.p,{children:["Resolves immediately. State is rehydrated / synced before ",(0,s.jsx)(n.code,{children:"APP_INITIALIZER"})," completes."]}),"\n",(0,s.jsxs)(n.p,{children:["This is the ",(0,s.jsx)(n.strong,{children:"default"})," strategy for both ",(0,s.jsx)(n.code,{children:"persist-state"})," and ",(0,s.jsx)(n.code,{children:"sync-state"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"afterappinit",children:(0,s.jsx)(n.code,{children:"AfterAppInit"})}),"\n",(0,s.jsxs)(n.p,{children:["Resolves only after ",(0,s.jsx)(n.code,{children:"markAsInitialized()"})," is called. Useful when your app initializers need the default state before rehydration:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { AfterAppInit } from '@ngrx-addons/common';\n\n// In your provider config\nprovidePersistStore({\n  strategy: AfterAppInit,\n  states: [...],\n});\n\n// In your root component\n@Component({ ... })\nexport class AppComponent {\n  private readonly afterAppInit = inject(AfterAppInit);\n\n  ngOnInit() {\n    // Trigger rehydration after your initialization logic\n    this.afterAppInit.markAsInitialized();\n  }\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"afterAppInitProvider"})," is automatically included when you use ",(0,s.jsx)(n.code,{children:"providePersistStore"})," or ",(0,s.jsx)(n.code,{children:"provideSyncStore"}),"."]})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},8453(e,n,i){i.d(n,{R:()=>r,x:()=>d});var t=i(6540);const s={},o=t.createContext(s);function r(e){const n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);