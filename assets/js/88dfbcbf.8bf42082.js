"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[540],{6717(e,n,t){t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>u,frontMatter:()=>a,metadata:()=>o,toc:()=>i});const o=JSON.parse('{"id":"sync-state/getting-started","title":"Getting Started","description":"Synchronize your NgRx store state across multiple browser tabs and windows using the Broadcast Channel API.","source":"@site/docs/sync-state/getting-started.md","sourceDirName":"sync-state","slug":"/sync-state/getting-started","permalink":"/ngrx-addons/docs/sync-state/getting-started","draft":false,"unlisted":false,"editUrl":"https://github.com/Michsior14/ngrx-addons/tree/main/docs/docs/sync-state/getting-started.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"docsSidebar","previous":{"title":"Advanced Usage","permalink":"/ngrx-addons/docs/persist-state/advanced"},"next":{"title":"Configuration","permalink":"/ngrx-addons/docs/sync-state/configuration"}}');var r=t(4848),s=t(8453);const a={sidebar_position:1},d="Getting Started",c={},i=[{value:"Installation",id:"installation",level:2},{value:"Root State Synchronization",id:"root-state-synchronization",level:2},{value:"Standalone API (recommended)",id:"standalone-api-recommended",level:3},{value:"NgModule API",id:"ngmodule-api",level:3},{value:"Feature State Synchronization",id:"feature-state-synchronization",level:2},{value:"Standalone API (recommended)",id:"standalone-api-recommended-1",level:3},{value:"NgModule API",id:"ngmodule-api-1",level:3},{value:"Sync Action",id:"sync-action",level:2}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"getting-started",children:"Getting Started"})}),"\n",(0,r.jsxs)(n.p,{children:["Synchronize your NgRx store state across multiple browser tabs and windows using the ",(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Broadcast_Channel_API",children:"Broadcast Channel API"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npm i @ngrx-addons/sync-state\n"})}),"\n",(0,r.jsx)(n.h2,{id:"root-state-synchronization",children:"Root State Synchronization"}),"\n",(0,r.jsx)(n.h3,{id:"standalone-api-recommended",children:"Standalone API (recommended)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import { provideStore } from '@ngrx/store';\nimport { provideSyncStore } from '@ngrx-addons/sync-state';\n\nconst counterReducer = ...;\nconst reducers = { counter: counterReducer } as const;\n\nbootstrapApplication(AppComponent, {\n  providers: [\n    provideStore(reducers),\n    provideSyncStore<typeof reducers>({\n      states: [{ key: 'counter' }],\n    }),\n  ],\n});\n"})}),"\n",(0,r.jsx)(n.h3,{id:"ngmodule-api",children:"NgModule API"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import { NgModule } from '@angular/core';\nimport { StoreModule } from '@ngrx/store';\nimport { SyncStateModule } from '@ngrx-addons/sync-state';\n\nconst counterReducer = ...;\nconst reducers = { counter: counterReducer } as const;\n\n@NgModule({\n  imports: [\n    StoreModule.forRoot(reducers),\n    SyncStateModule.forRoot<typeof reducers>({\n      states: [{ key: 'counter' }],\n    }),\n  ],\n})\nexport class AppModule {}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"feature-state-synchronization",children:"Feature State Synchronization"}),"\n",(0,r.jsx)(n.h3,{id:"standalone-api-recommended-1",children:"Standalone API (recommended)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import { provideStore, provideState } from '@ngrx/store';\nimport { provideSyncStore, provideSyncState } from '@ngrx-addons/sync-state';\n\ninterface CounterState {\n  count: number;\n}\n\nconst counterReducer = ...;\n\n// Root module\nbootstrapApplication(AppComponent, {\n  providers: [\n    provideStore(),\n    provideSyncStore(),\n  ],\n});\n\n// Feature route/module\nconst counterRoutes: Route[] = [\n  {\n    path: 'counter',\n    providers: [\n      provideState('counter', counterReducer),\n      provideSyncState<CounterState>({\n        key: 'counter',\n        states: [{}],\n      }),\n    ],\n    children: [...],\n  },\n];\n"})}),"\n",(0,r.jsx)(n.h3,{id:"ngmodule-api-1",children:"NgModule API"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import { NgModule } from '@angular/core';\nimport { StoreModule } from '@ngrx/store';\nimport { SyncStateModule } from '@ngrx-addons/sync-state';\n\ninterface CounterState {\n  count: number;\n}\n\nconst counterReducer = ...;\n\n@NgModule({\n  imports: [\n    StoreModule.forRoot(),\n    SyncStateModule.forRoot(),\n  ],\n})\nexport class AppModule {}\n\n@NgModule({\n  imports: [\n    StoreModule.forFeature('counter', counterReducer),\n    SyncStateModule.forFeature<CounterState>({\n      key: 'counter',\n      states: [{}],\n    }),\n  ],\n})\nexport class CounterModule {}\n"})}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["Always call ",(0,r.jsx)(n.code,{children:"forRoot()"})," / ",(0,r.jsx)(n.code,{children:"provideSyncStore()"})," in your root module, even if you only use feature states."]})}),"\n",(0,r.jsx)(n.h2,{id:"sync-action",children:"Sync Action"}),"\n",(0,r.jsxs)(n.p,{children:["When state is received from another tab, the ",(0,r.jsx)(n.code,{children:"storeSyncAction"})," (type: ",(0,r.jsx)(n.code,{children:"@ngrx-addons/sync-state/sync"}),") is dispatched with the synced ",(0,r.jsx)(n.code,{children:"features"}),". You can use it in effects:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import { storeSyncAction } from '@ngrx-addons/sync-state';\n\nthis.actions$.pipe(\n  ofType(storeSyncAction),\n  tap(({ features }) => console.log('Synced from another tab:', features)),\n);\n"})})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},8453(e,n,t){t.d(n,{R:()=>a,x:()=>d});var o=t(6540);const r={},s=o.createContext(r);function a(e){const n=o.useContext(s);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);